{
    "app-id": "org.freedesktop.fwupd",
    "runtime": "org.gnome.Platform",
    "runtime-version": "49",
    "sdk": "org.gnome.Sdk",
    "command": "fwupdtool",
    "finish-args": [
        "--device=all",
        "--filesystem=/boot",
        "--filesystem=/sys",
        "--filesystem=xdg-download",
        "--share=network",
        "--system-talk-name=org.freedesktop.login1",
        "--system-talk-name=org.freedesktop.fwupd",
        "--system-talk-name=org.freedesktop.UDisks2",
        "--system-talk-name=org.freedesktop.UPower"
    ],
    "cleanup": [
        "*.a",
        "*.la",
        "/include",
        "/lib/girepository-1.0",
        "/lib/pkgconfig",
        "/share/bash-completion",
        "/share/dbus-1/system-services",
        "/share/gir-1.0",
        "/share/gtk-doc",
        "/share/info",
        "/share/man",
        "/share/vala",
        "/share/pkgconfig"
    ],
    "modules": [
        {
            "name": "gnu-efi",
            "buildsystem": "simple",
            "build-options": {
                "ldflags-override": true
            },
            "build-commands": [
                "make",
                "make PREFIX=/app install"
            ],
            "no-autogen": true,
            "cleanup": [
                "/bin/efivar"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/ncroxon/gnu-efi/archive/refs/tags/3.0.19.tar.gz",
                    "sha256": "e2ae35d4bdab887aeb4fd2ee721aa8c3d39bbc50518c83800affa49b98dd9ce8",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 1202,
                        "versions": {
                            "<": "4.0.0"
                        },
                        "stable-only": true,
                        "url-template": "https://github.com/ncroxon/gnu-efi/archive/refs/tags/$version.tar.gz"
                    }
                },
                {
                    "type": "patch",
                    "path": "gnu-efi-no-relro.patch"
                }
            ]
        },
        {
            "name": "libxmlb",
            "buildsystem": "meson",
            "config-opts": [
                "-Dintrospection=false",
                "-Dgtkdoc=false",
                "-Dtests=false",
                "-Dstemmer=false",
                "-Dcli=false",
                "--sysconfdir=/app/etc",
                "--localstatedir=/var/data"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/hughsie/libxmlb/releases/download/0.3.24/libxmlb-0.3.24.tar.xz",
                    "sha256": "ded52667aac942bb1ff4d1e977e8274a9432d99033d86918feb82ade82b8e001",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 179028,
                        "url-template": "https://github.com/hughsie/libxmlb/releases/download/$version/libxmlb-$version.tar.xz"
                    }
                }
            ]
        },
        {
            "name": "libmbim",
            "buildsystem": "meson",
            "cleanup": [
                "/bin"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://gitlab.freedesktop.org/mobile-broadband/libmbim/-/archive/1.34.0/libmbim-1.34.0.tar.gz",
                    "sha256": "55bb88df358f8a36b6e01e63877500d7c6420f5907d2d3101812b4912eabe08f",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 7308,
                        "stable-only": true,
                        "url-template": "https://gitlab.freedesktop.org/mobile-broadband/libmbim/-/archive/$version/libmbim-$version.tar.gz"
                    }
                }
            ]
        },
        {
            "name": "libqrtr",
            "buildsystem": "meson",
            "cleanup": [
                "/bin"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://gitlab.freedesktop.org/mobile-broadband/libqrtr-glib/-/archive/1.4.0/libqrtr-glib-1.4.0.tar.gz",
                    "sha256": "9e5f988c6005af347f6d0ac95c872e473c9c10c3ec3714ee0b73d896db7d5766",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 192056,
                        "stable-only": true,
                        "url-template": "https://gitlab.freedesktop.org/mobile-broadband/libqrtr-glib/-/archive/$version/libqrtr-glib-$version.tar.gz"
                    }
                }
            ]
        },
        {
            "name": "libqmi",
            "buildsystem": "meson",
            "cleanup": [
                "/bin",
                "/libexec/qmi-proxy"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://gitlab.freedesktop.org/mobile-broadband/libqmi/-/archive/1.38.0/libqmi-1.38.0.tar.gz",
                    "sha256": "8ee3b3a9002f2b45c825deade85710db006e01674f5f9359d351c192cc926015",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 7307,
                        "stable-only": true,
                        "url-template": "https://gitlab.freedesktop.org/mobile-broadband/libqmi/-/archive/$version/libqmi-$version.tar.gz"
                    }
                }
            ]
        },
        {
            "name": "ModemManager",
            "buildsystem": "meson",
            "config-opts": [
                "-Dudev=false",
                "-Dsystemdsystemunitdir=/app/lib/systemd/system",
                "-Dudevdir=/app/lib/udev"
            ],
            "cleanup": [
                "/bin/mmcli",
                "/etc/dbus-1/system.d",
                "/lib/ModemManager",
                "/lib/rules.d",
                "/lib/systemd",
                "/sbin/ModemManager",
                "/share/dbus-1/interfaces",
                "/share/icons"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://gitlab.freedesktop.org/mobile-broadband/ModemManager/-/archive/1.24.2/ModemManager-1.24.2.tar.gz",
                    "sha256": "fbc75adcc0d7b0565f256e7ff4e8872b0a37c4413ff576665f7470932d9c1b68",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 7306,
                        "stable-only": true,
                        "url-template": "https://gitlab.freedesktop.org/mobile-broadband/ModemManager/-/archive/$version/ModemManager-$version.tar.gz"
                    }
                }
            ]
        },
        {
            "name": "tpm2-tss",
            "config-opts": [
                "--disable-doxygen-doc",
                "--with-udevrulesdir=/app/lib"
            ],
            "cleanup": [
                "/lib/rules.d"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/tpm2-software/tpm2-tss/releases/download/2.3.2/tpm2-tss-2.3.2.tar.gz",
                    "sha256": "82929a0611f39246e09202702a61b54c980ab694626c1f5823520ddf75024fa6"
                }
            ]
        },
        {
            "name": "libjcat",
            "buildsystem": "meson",
            "config-opts": [
                "-Dintrospection=false",
                "-Dgtkdoc=false",
                "-Dtests=false",
                "-Dcli=false",
                "--sysconfdir=/app/etc",
                "--localstatedir=/var/data"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/hughsie/libjcat/releases/download/0.2.5/libjcat-0.2.5.tar.xz",
                    "sha256": "066e402168c51bffddcf325190e5901402b266fbda2a4eed772fd06a88b941bf",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 229583,
                        "url-template": "https://github.com/hughsie/libjcat/releases/download/$version/libjcat-$version.tar.xz"
                    }
                }
            ]
        },
        {
            "name": "python3-pefile",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"pefile\" --no-build-isolation"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/03/4f/2750f7f6f025a1507cd3b7218691671eecfd0bbebebe8b39aa0fe1d360b8/pefile-2024.8.26.tar.gz",
                    "sha256": "3ff6c5d8b43e8c37bb6e6dd5085658d658a7a0bdcd20b6a07b1fcfc1c4e9d632",
                    "x-checker-data": {
                        "type": "pypi",
                        "name": "pefile"
                    }
                }
            ]
        },
        {
            "name": "python3-jinja2",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"jinja2\" --no-build-isolation"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/7e/99/7690b6d4034fffd95959cbe0c02de8deb3098cc577c67bb6a24fe5d7caa7/markupsafe-3.0.3.tar.gz",
                    "sha256": "722695808f4b6457b320fdc131280796bdceb04ab50fe1795cd540799ebe1698",
                    "x-checker-data": {
                        "type": "pypi",
                        "name": "markupsafe"
                    }
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/df/bf/f7da0350254c0ed7c72f3e33cef02e048281fec7ecec5f032d4aac52226b/jinja2-3.1.6.tar.gz",
                    "sha256": "0137fb05990d35f1275a587e9aee6d56da821fc83491a0fb838183be43f66d6d",
                    "x-checker-data": {
                        "type": "pypi",
                        "name": "jinja2"
                    }
                }
            ]
        },
        {
            "name": "fwupd-efi",
            "buildsystem": "meson",
            "build-options": {
                "ldflags-override": true
            },
            "config-opts": [
                "-Defi-includedir=/app/include/efi",
                "-Defi-ldsdir=/app/lib",
                "-Defi-libdir=/app/lib"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/fwupd/fwupd-efi/archive/refs/tags/1.8.tar.gz",
                    "sha256": "c9f1f9b9b967ea50eb0b478f0d7693d6673d4cd76c8e7eb80c55fc44ec928925",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 326081,
                        "url-template": "https://github.com/fwupd/fwupd-efi/archive/refs/tags/$version.tar.gz"
                    }
                }
            ]
        },
        {
            "name": "libcbor",
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/PJK/libcbor/archive/refs/tags/v0.13.0.tar.gz",
                    "sha256": "95a7f0dd333fd1dce3e4f92691ca8be38227b27887599b21cd3c4f6d6a7abb10",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 15699,
                        "stable-only": true,
                        "url-template": "https://github.com/PJK/libcbor/archive/refs/tags/v$version.tar.gz"
                    }
                }
            ]
        },
        {
            "name": "flashrom",
            "buildsystem": "meson",
            "config-opts": [
                "-Dclassic_cli=disabled",
                "-Dich_descriptors_tool=disabled",
                "-Dbash_completion=disabled",
                "-Dtests=disabled",
                "-Dman-pages=disabled",
                "-Ddocumentation=disabled"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/flashrom/flashrom/archive/refs/tags/v1.6.0.tar.gz",
                    "sha256": "735c077ee8ac08e236ef7b7db894ab22d5f4b75f10156a4732bd818a1e21fcc5",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 10202,
                        "stable-only": true,
                        "url-template": "https://github.com/flashrom/flashrom/archive/refs/tags/v$version.tar.gz"
                    }
                }
            ]
        },
        {
            "name": "fwupd",
            "buildsystem": "meson",
            "config-opts": [
                "-Dbuild=standalone",
                "-Ddocs=disabled",
                "-Dpassim=disabled",
                "-Dplugin_flashrom=enabled",
                "-Dintrospection=disabled",
                "-Dfish_completion=false",
                "-Dbash_completion=false",
                "-Dman=false",
                "-Dsystemd=disabled",
                "-Dpolkit=disabled",
                "-Dtests=false",
                "-Dvendor_ids_dir=/app/share/hwdata",
                "--libdir=/app/lib",
                "--sysconfdir=/app/etc",
                "--localstatedir=/var/data"
            ],
            "cleanup": [
                "/etc/dbus-1/system.d/org.freedesktop.fwupd.conf"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/fwupd/fwupd/releases/download/2.0.19/fwupd-2.0.19.tar.xz",
                    "sha256": "3bb7a4a1e2d00f0ab513e4c667d7bf5a3ff34a9802757849d3fedf07dd40ddbb",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 5833,
                        "url-template": "https://github.com/fwupd/fwupd/releases/download/$version/fwupd-$version.tar.xz"
                    }
                }
            ]
        }
    ]
}
